"use strict";(self["webpackChunkgood_life"]=self["webpackChunkgood_life"]||[]).push([[883],{5969:(t,e,a)=>{a.d(e,{Z:()=>f});var n=a(3396),o=a(7139),l=a(9242),i={"aria-label":"Page navigation example"},s={class:"pagination justify-content-center"},c=(0,n._)("span",{"aria-hidden":"true"},"«",-1),r=[c],d={key:0,class:"page-link"},u=["onClick"],p=(0,n._)("span",{"aria-hidden":"true"},"»",-1),m=[p];function h(t,e,a,c,p,h){return(0,n.wg)(),(0,n.iD)("nav",i,[(0,n._)("ul",s,[(0,n._)("li",{class:(0,o.C_)([{disabled:!a.pages.has_pre},"page-item"])},[(0,n._)("a",{class:"page-link",href:"#","aria-label":"Previous",onClick:e[0]||(e[0]=(0,l.iM)((function(t){return h.updatePage(a.pages.current_page-1)}),["prevent"]))},r)],2),((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(a.pages.total_pages,(function(t){return(0,n.wg)(),(0,n.iD)("li",{class:(0,o.C_)(["page-item",{active:a.pages.current_page===t}]),key:t},[t===a.pages.current_page?((0,n.wg)(),(0,n.iD)("span",d,(0,o.zw)(t),1)):((0,n.wg)(),(0,n.iD)("a",{key:1,class:"page-link",href:"#",onClick:(0,l.iM)((function(e){return h.updatePage(t)}),["prevent"])},(0,o.zw)(t),9,u))],2)})),128)),(0,n._)("li",{class:(0,o.C_)(["page-item",{disabled:!a.pages.has_next}])},[(0,n._)("a",{class:"page-link",href:"#","aria-label":"Next",onClick:e[1]||(e[1]=(0,l.iM)((function(t){return h.updatePage(a.pages.current_page+1)}),["prevent"]))},m)],2)])])}const g={props:["pages"],methods:{updatePage:function(t){this.$emit("emit-pages",t)}}};var _=a(89);const b=(0,_.Z)(g,[["render",h]]),f=b},5612:(t,e,a)=>{a.r(e),a.d(e,{default:()=>Wt});var n=a(3396),o=a(7139),l=a(9242),i={class:"container"},s=(0,n._)("p",{class:"h2 text-center my-4"},[(0,n._)("span",{class:"text-dark bg-secondary"},"產品列表")],-1),c={class:"row justify-content-center"},r={class:"col-12"},d={class:"text-end mt-4"},u={class:"table mt-4 d-none d-md-table"},p=(0,n._)("thead",null,[(0,n._)("tr",null,[(0,n._)("th",{width:"120"}," 分類 "),(0,n._)("th",null,"名稱"),(0,n._)("th",{width:"120"}," 原價 "),(0,n._)("th",{width:"120"}," 售價 "),(0,n._)("th",{width:"100"}," 狀態 "),(0,n._)("th",{width:"120"}," 操作 ")])],-1),m={class:"text-end"},h={class:"text-end"},g={class:"form-check form-switch"},_=["id","onUpdate:modelValue","onChange"],b=["for"],f={key:0,class:"text-primary"},y={key:1,class:"text-light"},v={class:"btn-group"},w=["onClick"],P=["onClick"],k={class:"table mt-4 d-table d-md-none"},x=(0,n._)("th",null,"分類",-1),U=(0,n._)("th",null,"名稱",-1),M=(0,n._)("th",null,"原價",-1),D=(0,n._)("th",null,"售價",-1),C=(0,n._)("th",null,"狀態",-1),j={class:"form-check form-switch"},z=["id","onUpdate:modelValue","onChange"],R=["for"],$={key:0,class:"text-primary"},V={key:1,class:"text-light"},Z=(0,n._)("th",null,"操作",-1),S={class:"btn-group"},I=["onClick"],N=["onClick"];function A(t,e,a,A,E,H){var Y=(0,n.up)("Loading"),K=(0,n.up)("Pagination"),L=(0,n.up)("ProductModal"),W=(0,n.up)("DelModal");return(0,n.wg)(),(0,n.iD)(n.HY,null,[(0,n.Wm)(Y,{"is-ready":E.isReady},null,8,["is-ready"]),(0,n._)("div",i,[s,(0,n._)("div",c,[(0,n._)("div",r,[(0,n._)("div",d,[(0,n._)("button",{class:"btn btn-success text-white",onClick:e[0]||(e[0]=function(t){return H.openModal("new")})}," 建立新的產品 ")]),(0,n._)("table",u,[p,(0,n._)("tbody",null,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(E.products,(function(e){return(0,n.wg)(),(0,n.iD)("tr",{key:e.id},[(0,n._)("td",null,(0,o.zw)(e.category),1),(0,n._)("td",null,(0,o.zw)(e.title),1),(0,n._)("td",m,(0,o.zw)(t.$filters.currency(e.origin_price)),1),(0,n._)("td",h,(0,o.zw)(t.$filters.currency(e.price)),1),(0,n._)("td",null,[(0,n._)("div",g,[(0,n.wy)((0,n._)("input",{class:"form-check-input",type:"checkbox",id:"enableSwitch".concat(e.id),"onUpdate:modelValue":function(t){return e.is_enabled=t},"true-value":1,"false-value":0,onChange:function(t){return H.updateEnableStatus(e)}},null,40,_),[[l.e8,e.is_enabled]]),(0,n._)("label",{class:"form-check-label",for:"enableSwitch".concat(e.id,"}")},[e.is_enabled?((0,n.wg)(),(0,n.iD)("span",f,"上架")):((0,n.wg)(),(0,n.iD)("span",y,"下架"))],8,b)])]),(0,n._)("td",null,[(0,n._)("div",v,[(0,n._)("button",{type:"button",class:"btn btn-outline-success btn-sm",onClick:function(t){return H.openModal("edit",e)}}," 編輯 ",8,w),(0,n._)("button",{type:"button",class:"btn btn-outline-primary btn-sm",onClick:function(t){return H.openDelModal(e)}}," 刪除 ",8,P)])])])})),128))])]),(0,n._)("table",k,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(E.products,(function(e){return(0,n.wg)(),(0,n.iD)("tbody",{key:e.id},[(0,n._)("tr",null,[x,(0,n._)("td",null,(0,o.zw)(e.category),1)]),(0,n._)("tr",null,[U,(0,n._)("td",null,(0,o.zw)(e.title),1)]),(0,n._)("tr",null,[M,(0,n._)("td",null,(0,o.zw)(t.$filters.currency(e.origin_price)),1)]),(0,n._)("tr",null,[D,(0,n._)("td",null,(0,o.zw)(t.$filters.currency(e.price)),1)]),(0,n._)("tr",null,[C,(0,n._)("td",null,[(0,n._)("div",j,[(0,n.wy)((0,n._)("input",{class:"form-check-input",type:"checkbox",id:"enableSwitch".concat(e.id),"onUpdate:modelValue":function(t){return e.is_enabled=t},"true-value":1,"false-value":0,onChange:function(t){return H.updateEnableStatus(e)}},null,40,z),[[l.e8,e.is_enabled]]),(0,n._)("label",{class:"form-check-label",for:"enableSwitch".concat(e.id,"}")},[e.is_enabled?((0,n.wg)(),(0,n.iD)("span",$,"上架")):((0,n.wg)(),(0,n.iD)("span",V,"下架"))],8,R)])])]),(0,n._)("tr",null,[Z,(0,n._)("td",null,[(0,n._)("div",S,[(0,n._)("button",{type:"button",class:"btn btn-outline-success btn-sm",onClick:function(t){return H.openModal("edit",e)}}," 編輯 ",8,I),(0,n._)("button",{type:"button",class:"btn btn-outline-primary btn-sm",onClick:function(t){return H.openDelModal(e)}}," 刪除 ",8,N)])])])])})),128))])])]),(0,n.Wm)(K,{pages:E.pagination,onEmitPages:H.getProducts},null,8,["pages","onEmitPages"]),(0,n.Wm)(L,{"temp-product":E.tempProduct,"is-new":E.isNew,onAddProduct:H.addProduct,onUpdateProduct:H.updateProduct,ref:"ProductModal"},null,8,["temp-product","is-new","onAddProduct","onUpdateProduct"]),(0,n.Wm)(W,{"del-item":E.tempProduct,onRemoveItem:H.removeProduct,onGetItems:H.getProducts,ref:"delModal"},null,8,["del-item","onRemoveItem","onGetItems"])])],64)}var E=a(5082),H=(a(2222),a(9753),a(2526),a(1817),{id:"productModal",ref:"modal",class:"modal fade",tabindex:"-1","aria-labelledby":"productModalLabel","aria-hidden":"true"}),Y={class:"modal-dialog modal-xl"},K={class:"modal-content border-0"},L={class:"modal-header bg-success text-white"},W={id:"productModalLabel",class:"modal-title"},G=(0,n._)("button",{type:"button",class:"btn-close bg-white","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),q={class:"modal-body"},B={class:"row"},F={class:"col-sm-4"},J={class:"mb-2"},O={class:"mb-3"},Q=(0,n._)("label",{for:"imageUrl",class:"form-label"},"輸入圖片網址",-1),T=["src"],X={key:0},tt={class:"form-group"},et=(0,n._)("label",{for:"imageUrl",class:"form-label"},"圖片網址",-1),at=["onUpdate:modelValue"],nt=["src"],ot={key:0},lt={key:1},it={key:1},st={class:"col-sm-8"},ct={class:"mb-3"},rt=(0,n._)("label",{for:"title",class:"form-label"},"標題",-1),dt={class:"row"},ut={class:"mb-3 col-md-6"},pt=(0,n._)("label",{for:"category",class:"form-label"},"分類",-1),mt={class:"mb-3 col-md-6"},ht=(0,n._)("label",{for:"price",class:"form-label"},"單位",-1),gt={class:"row"},_t={class:"mb-3 col-md-6"},bt=(0,n._)("label",{for:"origin_price",class:"form-label"},"原價",-1),ft={class:"mb-3 col-md-6"},yt=(0,n._)("label",{for:"price",class:"form-label"},"售價",-1),vt=(0,n._)("hr",null,null,-1),wt={class:"mb-3"},Pt=(0,n._)("label",{for:"description",class:"form-label"},"產品描述",-1),kt={class:"mb-3"},xt=(0,n._)("label",{for:"content",class:"form-label"},"說明內容",-1),Ut={class:"mb-3"},Mt={class:"form-check form-switch"},Dt=["id"],Ct=["for"],jt={key:0,class:"text-primary"},zt={key:1,class:"text-light"},Rt={class:"modal-footer"},$t=(0,n._)("button",{type:"button",class:"btn btn-outline-success","data-bs-dismiss":"modal"}," 取消 ",-1);function Vt(t,e,a,i,s,c){return(0,n.wg)(),(0,n.iD)("div",H,[(0,n._)("div",Y,[(0,n._)("div",K,[(0,n._)("div",L,[(0,n._)("h5",W,[(0,n._)("span",null,(0,o.zw)(t.isNew?"新增產品":"編輯產品"),1)]),G]),(0,n._)("div",q,[(0,n._)("div",B,[(0,n._)("div",F,[(0,n._)("div",J,[(0,n._)("div",O,[Q,(0,n.wy)((0,n._)("input",{type:"text",class:"form-control",placeholder:"請輸入圖片連結","onUpdate:modelValue":e[0]||(e[0]=function(e){return t.tempProduct.imageUrl=e})},null,512),[[l.nr,t.tempProduct.imageUrl]]),(0,n._)("img",{class:"img-fluid",src:t.tempProduct.imageUrl,alt:""},null,8,T)])]),Array.isArray(t.tempProduct.imagesUrl)?((0,n.wg)(),(0,n.iD)("div",X,[((0,n.wg)(!0),(0,n.iD)(n.HY,null,(0,n.Ko)(t.tempProduct.imagesUrl,(function(e,a){return(0,n.wg)(),(0,n.iD)("div",{class:"mb-1",key:a},[(0,n._)("div",tt,[et,(0,n.wy)((0,n._)("input",{"onUpdate:modelValue":function(e){return t.tempProduct.imagesUrl[a]=e},type:"text",class:"form-control",placeholder:"請輸入圖片連結"},null,8,at),[[l.nr,t.tempProduct.imagesUrl[a]]])]),(0,n._)("img",{class:"img-fluid",src:e},null,8,nt)])})),128)),!t.tempProduct.imagesUrl.length||t.tempProduct.imagesUrl[t.tempProduct.imagesUrl.length-1]?((0,n.wg)(),(0,n.iD)("div",ot,[(0,n._)("button",{class:"btn btn-outline-primary btn-sm d-block w-100",onClick:e[1]||(e[1]=function(e){return t.tempProduct.imagesUrl.push("")})}," 新增圖片 ")])):((0,n.wg)(),(0,n.iD)("div",lt,[(0,n._)("button",{class:"btn btn-outline-danger btn-sm d-block w-100",onClick:e[2]||(e[2]=function(e){return t.tempProduct.imagesUrl.pop()})}," 刪除圖片 ")]))])):((0,n.wg)(),(0,n.iD)("div",it,[(0,n._)("button",{class:"btn btn-outline-primary btn-sm d-block w-100",onClick:e[3]||(e[3]=function(){return t.initialImgArray&&t.initialImgArray.apply(t,arguments)})}," 新增圖片 ")]))]),(0,n._)("div",st,[(0,n._)("div",ct,[rt,(0,n.wy)((0,n._)("input",{id:"title",type:"text",class:"form-control",placeholder:"請輸入標題","onUpdate:modelValue":e[4]||(e[4]=function(e){return t.tempProduct.title=e})},null,512),[[l.nr,t.tempProduct.title]])]),(0,n._)("div",dt,[(0,n._)("div",ut,[pt,(0,n.wy)((0,n._)("input",{id:"category",type:"text",class:"form-control",placeholder:"請輸入分類","onUpdate:modelValue":e[5]||(e[5]=function(e){return t.tempProduct.category=e})},null,512),[[l.nr,t.tempProduct.category]])]),(0,n._)("div",mt,[ht,(0,n.wy)((0,n._)("input",{id:"unit",type:"text",class:"form-control",placeholder:"請輸入單位","onUpdate:modelValue":e[6]||(e[6]=function(e){return t.tempProduct.unit=e})},null,512),[[l.nr,t.tempProduct.unit]])])]),(0,n._)("div",gt,[(0,n._)("div",_t,[bt,(0,n.wy)((0,n._)("input",{id:"origin_price",type:"number",min:"0",class:"form-control",placeholder:"請輸入原價","onUpdate:modelValue":e[7]||(e[7]=function(e){return t.tempProduct.origin_price=e})},null,512),[[l.nr,t.tempProduct.origin_price]])]),(0,n._)("div",ft,[yt,(0,n.wy)((0,n._)("input",{id:"price",type:"number",min:"0",class:"form-control",placeholder:"請輸入售價","onUpdate:modelValue":e[8]||(e[8]=function(e){return t.tempProduct.price=e})},null,512),[[l.nr,t.tempProduct.price]])])]),vt,(0,n._)("div",wt,[Pt,(0,n.wy)((0,n._)("textarea",{id:"description",type:"text",class:"form-control",placeholder:"請輸入產品描述","onUpdate:modelValue":e[9]||(e[9]=function(e){return t.tempProduct.description=e})},"\r\n                ",512),[[l.nr,t.tempProduct.description]])]),(0,n._)("div",kt,[xt,(0,n.wy)((0,n._)("textarea",{id:"description",type:"text",class:"form-control",placeholder:"請輸入說明內容","onUpdate:modelValue":e[10]||(e[10]=function(e){return t.tempProduct.content=e})},"\r\n                ",512),[[l.nr,t.tempProduct.content]])]),(0,n._)("div",Ut,[(0,n._)("div",Mt,[(0,n.wy)((0,n._)("input",{class:"form-check-input",type:"checkbox",id:"enableSwitch".concat(t.tempProduct.id),"onUpdate:modelValue":e[11]||(e[11]=function(e){return t.tempProduct.is_enabled=e}),"true-value":1,"false-value":0},null,8,Dt),[[l.e8,t.tempProduct.is_enabled]]),(0,n._)("label",{class:"form-check-label",for:"enableSwitch".concat(t.tempProduct.id,"}")},[t.tempProduct.is_enabled?((0,n.wg)(),(0,n.iD)("span",jt," 上架 ")):((0,n.wg)(),(0,n.iD)("span",zt,"下架"))],8,Ct)])])])])]),(0,n._)("div",Rt,[$t,(0,n._)("button",{type:"button",class:"btn btn-outline-primary",onClick:e[12]||(e[12]=function(e){return t.isNew?t.$emit("add-product",t.tempProduct):t.$emit("update-product",t.tempProduct)})}," 確認 ")])])])],512)}var Zt=a(1339);const St={props:["temp-product","is-new"],mixins:[Zt.Z]};var It=a(89);const Nt=(0,It.Z)(St,[["render",Vt]]),At=Nt;var Et=a(3167),Ht=a(5969),Yt=a(6147);const Kt={data:function(){return{products:[],productId:"",tempProduct:{imagesUrl:[]},isNew:!1,isReady:!1,pagination:{},productModal:"",delModal:""}},inject:["emitter"],components:{ProductModal:At,DelModal:Et.Z,Pagination:Ht.Z,Loading:Yt.Z},methods:{getProducts:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;this.isReady=!1;var a="".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("hyxfish27","/admin/products?page=").concat(e);this.$http.get(a).then((function(e){t.products=e.data.products,t.pagination=e.data.pagination,t.isReady=!0}))["catch"]((function(e){t.emitter.emit("push-message",{style:"danger",title:e.response.data.message,emoji:"".concat("emoji-dizzy")})}))},addProduct:function(){var t=this;this.isReady=!1;var e="".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("hyxfish27","/admin/product");this.$http.post(e,{data:this.tempProduct}).then((function(e){t.getProducts(),t.emitter.emit("push-message",{style:"success",title:e.data.message,emoji:"".concat("emoji-laughing")}),t.isReady=!0}))["catch"]((function(e){t.emitter.emit("push-message",{style:"danger",title:e.response.data.message,emoji:"".concat("emoji-dizzy")}),t.isReady=!0})),this.$refs.ProductModal.hideModal()},updateProduct:function(){var t=this;this.isReady=!1;var e="".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("hyxfish27","/admin/product/").concat(this.tempProduct.id);this.$http.put(e,{data:this.tempProduct}).then((function(e){t.emitter.emit("push-message",{style:"success",title:e.data.message,emoji:"".concat("emoji-laughing")}),t.getProducts(t.pagination.current_page),t.isReady=!0}))["catch"]((function(e){t.emitter.emit("push-message",{style:"danger",title:e.response.data.message,emoji:"".concat("emoji-dizzy")}),t.isReady=!0})),this.$refs.ProductModal.hideModal()},removeProduct:function(t){var e=this;this.isReady=!1;var a="".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("hyxfish27","/admin/product/").concat(t);this.$http["delete"](a).then((function(t){e.emitter.emit("push-message",{style:"success",title:t.data.message,emoji:"".concat("emoji-laughing")}),e.getProducts(e.pagination.current_page),e.isReady=!0}))["catch"]((function(t){e.emitter.emit("push-message",{style:"danger",title:t.response.data.message,emoji:"".concat("emoji-dizzy")}),e.isReady=!0})),this.$refs.delModal.hideModal()},updateEnableStatus:function(t){var e=this;this.isReady=!1;var a="".concat("https://vue3-course-api.hexschool.io/v2","/api/").concat("hyxfish27","/admin/product/").concat(t.id);this.$http.put(a,{data:t}).then((function(t){e.emitter.emit("push-message",{style:"success",title:t.data.message,emoji:"".concat("emoji-laughing")}),e.getProducts(e.pagination.current_page),e.isReady=!0}))["catch"]((function(t){e.emitter.emit("push-message",{style:"danger",title:t.response.data.message,emoji:"".concat("emoji-dizzy")}),e.isReady=!0}))},openModal:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";"new"===t?(this.tempProduct={imagesUrl:[]},this.isNew=!0):"edit"===t&&(this.tempProduct=(0,E.Z)({},e),this.isNew=!1),this.$refs.ProductModal.openModal()},openDelModal:function(t){this.tempProduct=(0,E.Z)({},t),this.$refs.delModal.openModal()}},mounted:function(){this.getProducts()}},Lt=(0,It.Z)(Kt,[["render",A]]),Wt=Lt}}]);
//# sourceMappingURL=883.c349ef2c.js.map